<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cybersecurity Identity Mystery</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Courier New', monospace;
            background-color: #000;
            color: #00FF00;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #00FF00;
        }
        h1, h2 {
            color: #00FF00;
        }
        input, button {
            background-color: #000;
            color: #00FF00;
            border: 1px solid #00FF00;
            padding: 5px 10px;
            margin: 5px 0;
        }
        button:hover {
            background-color: #003300;
        }
        #terminal {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #00FF00;
            padding: 10px;
            margin-top: 20px;
        }
        .hidden {
            display: none;
        }
        #asciiImage {
            font-size: 4px;
            line-height: 4px;
            letter-spacing: 1px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cybersecurity Identity Mystery</h1>
        
        <div id="intro">
            <p>System boot sequence initiated. Amnesia protocol detected. Initiating memory recovery...</p>
            <button id="startGame">BEGIN SEQUENCE</button>
        </div>
        
        <div id="game" class="hidden">
            <div id="message">
                <h2>Encrypted Message:</h2>
                <p id="messageContent"></p>
            </div>
            
            <div id="image">
                <h2>Mysterious Image:</h2>
                <pre id="asciiImage"></pre>
            </div>
            
            <div id="actions">
                <button id="analyzeImage">ANALYZE IMAGE</button>
                <button id="decryptMessage">DECRYPT MESSAGE</button>
                <button id="scanPorts">SCAN NETWORK PORTS</button>
            </div>
            
            <div id="terminal"></div>
            
            <div id="identityForm" class="hidden">
                <h2>EXECUTE IDENTITY RECOVERY</h2>
                <input type="text" id="identityGuess" placeholder="Enter identity">
                <button id="submitGuess">SUBMIT</button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let gameState = {
            clues: 0,
            identity: "CyberSleuth2024",
            message: "01010100 01101000 01100101 00100000 01101011 01100101 01111001 00100000 01110100 01101111 00100000 01111001 01101111 01110101 01110010 00100000 01110000 01100001 01110011 01110100 00100000 01101100 01101001 01100101 01110011 00100000 01101001 01101110 00100000 01110100 01101000 01100101 00100000 01110011 01101000 01100001 01100100 01101111 01110111 01110011 00101110",
            imageClues: [
                "Analysis complete: QR code fragment detected in sector A7.",
                "Enhancing image: Reflected screen contents partially visible.",
                "Metadata extraction: File name contains string 'CyberSl'."
            ],
            portScanComplete: false,
            steganographyRevealed: false
        };

        // DOM elements
        const startButton = document.getElementById('startGame');
        const gameDiv = document.getElementById('game');
        const messageContent = document.getElementById('messageContent');
        const asciiImage = document.getElementById('asciiImage');
        const analyzeImageButton = document.getElementById('analyzeImage');
        const decryptMessageButton = document.getElementById('decryptMessage');
        const scanPortsButton = document.getElementById('scanPorts');
        const terminal = document.getElementById('terminal');
        const identityForm = document.getElementById('identityForm');
        const identityGuess = document.getElementById('identityGuess');
        const submitGuess = document.getElementById('submitGuess');

        // ASCII art "image" with hidden message
        const asciiArt = `
        ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
        ░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░
        ░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░
        ░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░
        ░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░
        ░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░
        ░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░
        ░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░
        ░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░
        ░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░
        ░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░
        ░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░
        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░
        ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
        `;

        // Event listeners
        startButton.addEventListener('click', startGame);
        analyzeImageButton.addEventListener('click', analyzeImage);
        decryptMessageButton.addEventListener('click', decryptMessage);
        scanPortsButton.addEventListener('click', scanPorts);
        submitGuess.addEventListener('click', checkIdentity);
        asciiImage.addEventListener('click', revealSteganography);

        function startGame() {
            document.getElementById('intro').classList.add('hidden');
            gameDiv.classList.remove('hidden');
            messageContent.textContent = gameState.message;
            asciiImage.textContent = asciiArt;
            addToTerminal("System initialized. Awaiting further instructions.");
        }

        function analyzeImage() {
            if (gameState.clues >= gameState.imageClues.length) {
                addToTerminal("Error: No new data found in image analysis.");
                return;
            }
            const clue = gameState.imageClues[gameState.clues];
            addToTerminal(clue);
            gameState.clues++;
            checkProgress();
        }

        function decryptMessage() {
            addToTerminal("Initiating decryption sequence...");
            setTimeout(() => {
                addToTerminal("Decryption complete: The key to your past lies in the shadows.");
                addToTerminal("Additional data: Username format - 'XXXX####' where X is alpha, # is numeric");
                checkProgress();
            }, 2000);
        }

        function scanPorts() {
            if (gameState.portScanComplete) {
                addToTerminal("Port scan already completed. No new information available.");
                return;
            }
            addToTerminal("Initiating network port scan...");
            setTimeout(() => {
                addToTerminal("Port scan complete. Open ports: 22 (SSH), 80 (HTTP), 443 (HTTPS)");
                addToTerminal("Unusual port detected: 1337. Purpose unknown.");
                gameState.portScanComplete = true;
                checkProgress();
            }, 3000);
        }

        function revealSteganography() {
            if (gameState.steganographyRevealed) {
                addToTerminal("Steganographic analysis already performed.");
                return;
            }
            addToTerminal("Analyzing image for hidden data...");
            setTimeout(() => {
                addToTerminal("Hidden message found: 'The shadows conceal port 1337'");
                gameState.steganographyRevealed = true;
                checkProgress();
            }, 2000);
        }

        function addToTerminal(text) {
            const p = document.createElement('p');
            p.textContent = `> ${text}`;
            terminal.appendChild(p);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function checkProgress() {
            if (gameState.clues >= 3 && gameState.portScanComplete && gameState.steganographyRevealed) {
                identityForm.classList.remove('hidden');
                addToTerminal("All data analyzed. Identity recovery possible. Enter your hypothesis.");
            }
        }

        function checkIdentity() {
            const guess = identityGuess.value.trim();
            if (guess.toLowerCase() === gameState.identity.toLowerCase()) {
                addToTerminal("Identity confirmed. Welcome back, " + gameState.identity + ".");
                addToTerminal("System access granted. Mission accomplished.");
            } else {
                addToTerminal("Identity mismatch. Access denied. Retry sequence initiated.");
            }
        }
    </script>
</body>
</html>
